<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Premium Shop âœ¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }
        .signup-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        .signup-container:hover {
            transform: translateY(-5px);
        }
        .signup-container h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        .signup-container input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        .signup-container input:focus {
            border-color: #3498db;
            outline: none;
        }
        .signup-container button {
            width: 100%;
            padding: 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        .signup-container button:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        .verification-container {
            display: none;
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        #dashboard {
            display: none;
        }
        .navbar {
            background: linear-gradient(90deg, #2c3e50, #34495e);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .navbar h2 {
            color: white;
            text-align: center;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .navbar h2 img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        .navbar button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            transition: background 0.3s;
        }
        .navbar button:hover {
            background: #c0392b;
        }
        .content {
            padding: 20px 0;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: #2c3e50;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        .bottom-nav .nav-item {
            text-align: center;
            color: white;
            cursor: pointer;
            padding: 5px;
            transition: transform 0.3s;
        }
        .bottom-nav .nav-item:hover {
            transform: scale(1.1);
        }
        .bottom-nav .nav-item img {
            width: 30px;
            height: 30px;
            margin-bottom: 5px;
        }
        .bottom-nav .nav-item p {
            font-size: 0.9em;
        }
        .section {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .post-card {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .premium-option {
            background: #3498db;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
        }
        .premium-option:hover {
            transform: scale(1.05);
            background: #2980b9;
        }
        /* Other styles remain similar to original */
    </style>
</head>
<body>
    <div id="loginSection" class="signup-container">
        <h2>Phone Verification</h2>
        <input type="text" id="phoneNumber" placeholder="Enter Phone Number (e.g., +959123456789)" required>
        <button id="requestCodeButton" onclick="requestVerificationCode()">Request Code</button>
    </div>

    <div id="verificationSection" class="verification-container">
        <h2>Verify Your Phone</h2>
        <p>Enter the code sent to your phone.</p>
        <input type="text" id="verificationCode" placeholder="Enter Verification Code" required>
        <button id="verifyButton" onclick="verifyCode()">Verify</button>
    </div>

    <div id="dashboard">
        <div class="navbar">
            <h2><img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/telegram-logo.png" alt="Logo"> Telegram Premium Shop</h2>
            <button id="logoutButton" onclick="logout()">Logout</button>
        </div>
        <div class="container">
            <div id="shopSection" class="section">
                <h2>Shop</h2>
                <div class="premium-option" onclick="selectPremium(3, 60000)">
                    Premium 3 Months - 60,000 MMK
                </div>
                <div class="premium-option" onclick="selectPremium(6, 135000)">
                    Premium 6 Months - 135,000 MMK
                </div>
                <div class="premium-option" onclick="selectPremium(12, 210000)">
                    Premium 1 Year - 210,000 MMK
                </div>
                <div class="quantity">
                    <button onclick="decreaseQuantity()">-</button>
                    <span id="quantity">1</span>
                    <button onclick="increaseQuantity()">+</button>
                </div>
                <div id="totalPrice">Total: 60,000 MMK</div>
                <div class="payment-method">
                    <select id="paymentSelect" onchange="showPhoneNumber()">
                        <option value="">Select Payment Method</option>
                        <option value="kpay">Kpay</option>
                        <option value="wave">Wave</option>
                    </select>
                </div>
                <input type="text" id="transactionId" placeholder="Enter Transaction ID" required>
                <input type="text" id="telegramUsername" placeholder="Enter Telegram Username" required>
                <button onclick="submitOrder()">Submit Order</button>
                <div id="status">Wait Admin Check <audio id="waitAudio" src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/wait_admin_check.mp3" preload="auto"></audio></div>
            </div>
            <!-- Other sections (Home, Profile, etc.) with original design -->
        </div>
        <div class="bottom-nav">
            <div class="nav-item" onclick="showSection('homeSection')">
                <img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/home-icon.png" alt="Home">
                <p>Home</p>
            </div>
            <div class="nav-item" onclick="showSection('shopSection')">
                <img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/shop-icon.png" alt="Shop">
                <p>Shop</p>
            </div>
            <div class="nav-item" onclick="showSection('hostSection')">
                <img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/host-icon.png" alt="Host">
                <p>Host</p>
            </div>
            <div class="nav-item" onclick="showSection('profileSection')">
                <img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/profile-icon.png" alt="Profile">
                <p>Profile</p>
            </div>
            <div class="nav-item" onclick="showSection('meSection')">
                <img src="https://raw.githubusercontent.com/Opper125/telegram-premium-shop/main/me-icon.png" alt="Me">
                <p>Me</p>
            </div>
        </div>
    </div>

    <script>
        let selectedMonths = 3;
        let selectedPrice = 60000;
        let quantity = 1;
        let userId = localStorage.getItem('userId');
        let verificationCode = null;

        if (!userId) {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('verificationSection').style.display = 'none';
            document.getElementById('dashboard').style.display = 'none';
        } else {
            document.getElementById('dashboard').style.display = 'block';
            showSection('shopSection');
        }

        async function requestVerificationCode() {
            const phoneNumber = document.getElementById('phoneNumber').value;
            if (!phoneNumber.match(/^\+95\d{9}$/)) {
                alert('Invalid Myanmar phone number!');
                return;
            }
            try {
                const response = await fetch('/.netlify/functions/send-verification-code', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phoneNumber })
                });
                const result = await response.json();
                verificationCode = result.code;
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('verificationSection').style.display = 'block';
                alert('Verification code sent to your phone!');
            } catch (error) {
                alert('Error sending code. Try again.');
            }
        }

        async function verifyCode() {
            const enteredCode = document.getElementById('verificationCode').value;
            if (enteredCode === verificationCode) {
                userId = 'user-' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('userId', userId);
                localStorage.setItem('phoneNumber', document.getElementById('phoneNumber').value);
                document.getElementById('verificationSection').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                showSection('shopSection');
            } else {
                alert('Invalid verification code!');
            }
        }

        function logout() {
            localStorage.removeItem('userId');
            localStorage.removeItem('phoneNumber');
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('phoneNumber').value = '';
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
        }

        function selectPremium(months, price) {
            selectedMonths = months;
            selectedPrice = price;
            updateTotal();
        }

        function increaseQuantity() { quantity++; updateTotal(); }
        function decreaseQuantity() { if (quantity > 1) quantity--; updateTotal(); }
        function updateTotal() { document.getElementById('totalPrice').innerText = `Total: ${selectedPrice * quantity} MMK`; }
        function showPhoneNumber() { /* Same as original */ }

        async function submitOrder() {
            const order = {
                userId, phoneNumber: localStorage.getItem('phoneNumber'),
                months: selectedMonths, quantity, total: selectedPrice * quantity,
                transactionId: document.getElementById('transactionId').value,
                telegramUsername: document.getElementById('telegramUsername').value,
                paymentMethod: document.getElementById('paymentSelect').value,
                status: 'pending', timestamp: new Date().toISOString()
            };
            try {
                const response = await fetch('/.netlify/functions/submit-order', {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(order)
                });
                const result = await response.json();
                document.getElementById('status').innerText = 'Order submitted! Waiting for approval.';
                fetch('https://opeer-telegram-good.netlify.app/.netlify/functions/update-orders', {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(order)
                });
            } catch (error) {
                document.getElementById('status').innerText = 'Error submitting order.';
            }
        }
    </script>
</body>
</html>
